/* =========================================
   1. UI & SIDEBAR (The Editor Interface)
   ========================================= */
.admin-sidebar {
    position: fixed; left: 0; top: 0; bottom: 0; width: 260px;
    background: #1a1a1a; padding: 25px; color: white;
    z-index: 1000; font-family: sans-serif; overflow-y: auto;
}

.admin-sidebar h2 { font-size: 18px; color: #27ae60; border-bottom: 1px solid #333; padding-bottom: 10px; }
.control-group { margin-top: 15px; font-size: 12px; }

.print-btn { background: #27ae60; color: white; border: none; padding: 15px; width: 100%; border-radius: 4px; font-weight: bold; cursor: pointer; margin-top: 25px; }
.save-btn { background: #3498db; color: white; border: none; padding: 12px; border-radius: 4px; font-weight: bold; cursor: pointer; margin-top: 10px; width: 100%; }
.image-btn { background: #e67e22; color: white; border: none; padding: 12px; width: 100%; border-radius: 4px; font-weight: bold; cursor: pointer; margin-bottom: 10px; }

/* =========================================
   2. SCREEN VIEWPORT (How it looks on Mac)
   ========================================= */
body {
    background-color: #333; margin: 0; padding-left: 260px;
    display: flex; flex-direction: column; align-items: center; font-family: 'Georgia', serif;
}

[contenteditable="true"]:hover { outline: 2px dashed #27ae60; outline-offset: 4px; }

.brochure-page {
    background: white; width: 297mm; height: 210mm;
    margin: 40px 0; display: grid; grid-template-columns: repeat(3, 1fr);
    box-shadow: 0 0 50px rgba(0,0,0,0.5); overflow: hidden; position: relative;
}

.panel { height: 100%; box-sizing: border-box; display: flex; flex-direction: column; border-right: 1px dashed #eee; }
.panel:last-child { border-right: none; }
.content { padding: 0.7in; display: flex; flex-direction: column; height: 100%; }

h1, h2, h3 { font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; margin-top: 0; }
p { line-height: 1.6; color: #333; font-size: 11pt; }

.inserted-image { max-width: 100%; height: auto; display: block; margin: 10px 0; }

/* =========================================
   3. THE PRINT ENGINE (THE NUCLEAR FIX)
   ========================================= */
@media print {
    /* 1. Reset the global page and body */
    @page { 
        size: A4 landscape; 
        margin: 0; 
    }
    
    /* 2. KILL THE FLEXBOX. Flexbox and Print Breaks do not get along. */
    html, body { 
        height: auto !important; 
        overflow: visible !important; 
        display: block !important; /* Force natural document flow */
        background: white !important;
        margin: 0 !important;
        padding: 0 !important;
    }

    .admin-sidebar { display: none !important; }

    /* 3. Force each page to be a distinct, non-squashable block */
    .brochure-page {
        display: grid !important; /* Keep your 3 columns */
        grid-template-columns: repeat(3, 1fr) !important;
        
        position: relative !important;
        margin: 0 !important;
        padding: 0 !important;
        box-shadow: none !important;
        border: none !important;
        
        width: 297mm !important;
        height: 209mm !important; /* Slightly short to prevent spillover */
        
        /* THE CRITICAL PAGE BREAKS */
        page-break-after: always !important; 
        break-after: page !important;
        page-break-inside: avoid !important;
    }

    .panel { border-right: none !important; }

    /* 4. Force colors and images */
    * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
}
